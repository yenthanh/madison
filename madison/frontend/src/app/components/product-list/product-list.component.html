<div class="container">
  <h1>Veterinary Products Management</h1>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <p>Loading data...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
  </div>

  <!-- Active Products Section -->
  <section class="products-section">
    <h2>Active Products ({{ activeProductsTotalCount }} products)</h2>
    <div class="products-grid">
      <div *ngFor="let product of activeProducts" class="product-card" [ngClass]="getStatusClass(product)">
        <div class="product-header">
          <h3>{{ product.name }}</h3>
          <span class="status-badge" [ngClass]="getStatusClass(product)">
            {{ product.isDangerousDrug ? 'Dangerous Drug' : 'Normal' }}
          </span>
        </div>
        <p class="description">{{ product.description }}</p>
        <div class="product-details">
          <span class="category">{{ product.category }}</span>
          <span class="price">{{ product.price | currency:'USD':'symbol':'1.2-2' }}</span>
        </div>
        <div class="product-actions">
          <a [routerLink]="['/products', product.id]" class="btn btn-primary">Details</a>
          <a [routerLink]="['/update-description']" [queryParams]="{id: product.id}" class="btn btn-secondary">Update</a>
        </div>
      </div>
    </div>

    <!-- Pagination for Active Products -->
    <div *ngIf="activeProductsTotalPages > 1" class="pagination">
      <div class="pagination-info">
                  Page {{ activeProductsPage }} / {{ activeProductsTotalPages }} 
        ({{ activeProductsTotalCount }} products)
      </div>
      <div class="pagination-controls">
        <button 
          (click)="loadActiveProductsPage(activeProductsPage - 1)" 
          [disabled]="activeProductsPage <= 1"
          class="btn btn-secondary">
          ← Previous
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of getActiveProductsPageNumbers()"
            (click)="loadActiveProductsPage(page)"
            [class.active]="page === activeProductsPage"
            class="page-btn">
            {{ page }}
          </button>
        </div>
        
        <button 
          (click)="loadActiveProductsPage(activeProductsPage + 1)" 
          [disabled]="activeProductsPage >= activeProductsTotalPages"
          class="btn btn-secondary">
          Next →
        </button>
      </div>
    </div>
  </section>

  <!-- Dangerous Drugs Section -->
  <section class="products-section">
    <h2>Dangerous Drugs ({{ dangerousDrugsTotalCount }} products)</h2>
    <div class="products-grid">
      <div *ngFor="let product of dangerousDrugs" class="product-card dangerous">
        <div class="product-header">
          <h3>{{ product.name }}</h3>
          <span class="status-badge dangerous">Dangerous Drug</span>
        </div>
        <p class="description">{{ product.description }}</p>
        <div class="product-details">
          <span class="category">{{ product.category }}</span>
          <span class="price">{{ product.price | currency:'USD':'symbol':'1.2-2' }}</span>
        </div>
        <div class="product-actions">
          <a [routerLink]="['/products', product.id]" class="btn btn-primary">Details</a>
          <a [routerLink]="['/update-description']" [queryParams]="{id: product.id}" class="btn btn-secondary">Update</a>
        </div>
      </div>
    </div>

    <!-- Pagination for Dangerous Drugs -->
    <div *ngIf="dangerousDrugsTotalPages > 1" class="pagination">
      <div class="pagination-info">
                  Page {{ dangerousDrugsPage }} / {{ dangerousDrugsTotalPages }} 
        ({{ dangerousDrugsTotalCount }} products)
      </div>
      <div class="pagination-controls">
        <button 
          (click)="loadDangerousDrugsPage(dangerousDrugsPage - 1)" 
          [disabled]="dangerousDrugsPage <= 1"
          class="btn btn-secondary">
          ← Previous
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of getDangerousDrugsPageNumbers()"
            (click)="loadDangerousDrugsPage(page)"
            [class.active]="page === dangerousDrugsPage"
            class="page-btn">
            {{ page }}
          </button>
        </div>
        
        <button 
          (click)="loadDangerousDrugsPage(dangerousDrugsPage + 1)" 
          [disabled]="dangerousDrugsPage >= dangerousDrugsTotalPages"
          class="btn btn-secondary">
          Next →
        </button>
      </div>
    </div>
  </section>
</div>
