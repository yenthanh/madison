<div class="container">
  <h1>Quản lý Sản phẩm Thú y</h1>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <p>Đang tải dữ liệu...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
  </div>

  <!-- Active Products Section -->
  <section class="products-section">
    <h2>Sản phẩm Active ({{ activeProductsTotalCount }} sản phẩm)</h2>
    <div class="products-grid">
      <div *ngFor="let product of activeProducts" class="product-card" [ngClass]="getStatusClass(product)">
        <div class="product-header">
          <h3>{{ product.name }}</h3>
          <span class="status-badge" [ngClass]="getStatusClass(product)">
            {{ product.isDangerousDrug ? 'Thuốc nguy hiểm' : 'Thường' }}
          </span>
        </div>
        <p class="description">{{ product.description }}</p>
        <div class="product-details">
          <span class="category">{{ product.category }}</span>
          <span class="price">{{ product.price | currency:'VND' }}</span>
        </div>
        <div class="product-actions">
          <a [routerLink]="['/products', product.id]" class="btn btn-primary">Chi tiết</a>
          <a [routerLink]="['/update-description']" [queryParams]="{id: product.id}" class="btn btn-secondary">Cập nhật</a>
        </div>
      </div>
    </div>

    <!-- Pagination for Active Products -->
    <div *ngIf="activeProductsTotalPages > 1" class="pagination">
      <div class="pagination-info">
        Trang {{ activeProductsPage }} / {{ activeProductsTotalPages }} 
        ({{ activeProductsTotalCount }} sản phẩm)
      </div>
      <div class="pagination-controls">
        <button 
          (click)="loadActiveProductsPage(activeProductsPage - 1)" 
          [disabled]="activeProductsPage <= 1"
          class="btn btn-secondary">
          ← Trước
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of getActiveProductsPageNumbers()"
            (click)="loadActiveProductsPage(page)"
            [class.active]="page === activeProductsPage"
            class="page-btn">
            {{ page }}
          </button>
        </div>
        
        <button 
          (click)="loadActiveProductsPage(activeProductsPage + 1)" 
          [disabled]="activeProductsPage >= activeProductsTotalPages"
          class="btn btn-secondary">
          Sau →
        </button>
      </div>
    </div>
  </section>

  <!-- Dangerous Drugs Section -->
  <section class="products-section">
    <h2>Thuốc Nguy hiểm ({{ dangerousDrugsTotalCount }} sản phẩm)</h2>
    <div class="products-grid">
      <div *ngFor="let product of dangerousDrugs" class="product-card dangerous">
        <div class="product-header">
          <h3>{{ product.name }}</h3>
          <span class="status-badge dangerous">Thuốc nguy hiểm</span>
        </div>
        <p class="description">{{ product.description }}</p>
        <div class="product-details">
          <span class="category">{{ product.category }}</span>
          <span class="price">{{ product.price | currency:'VND' }}</span>
        </div>
        <div class="product-actions">
          <a [routerLink]="['/products', product.id]" class="btn btn-primary">Chi tiết</a>
          <a [routerLink]="['/update-description']" [queryParams]="{id: product.id}" class="btn btn-secondary">Cập nhật</a>
        </div>
      </div>
    </div>

    <!-- Pagination for Dangerous Drugs -->
    <div *ngIf="dangerousDrugsTotalPages > 1" class="pagination">
      <div class="pagination-info">
        Trang {{ dangerousDrugsPage }} / {{ dangerousDrugsTotalPages }} 
        ({{ dangerousDrugsTotalCount }} sản phẩm)
      </div>
      <div class="pagination-controls">
        <button 
          (click)="loadDangerousDrugsPage(dangerousDrugsPage - 1)" 
          [disabled]="dangerousDrugsPage <= 1"
          class="btn btn-secondary">
          ← Trước
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of getDangerousDrugsPageNumbers()"
            (click)="loadDangerousDrugsPage(page)"
            [class.active]="page === dangerousDrugsPage"
            class="page-btn">
            {{ page }}
          </button>
        </div>
        
        <button 
          (click)="loadDangerousDrugsPage(dangerousDrugsPage + 1)" 
          [disabled]="dangerousDrugsPage >= dangerousDrugsTotalPages"
          class="btn btn-secondary">
          Sau →
        </button>
      </div>
    </div>
  </section>
</div>
